@using Sandbox;
@using Sandbox.UI;
@inherits PanelComponent

<root>
	@{ string br = $"[\U0001F7E1]Money: {GetMoney()}\n[\U0001F320]Point: {GetScore()}"; }
	<div style="
		position: absolute;
		background-color: #7f7;
		left: @mouse_position().x;
		top: @mouse_position().y;
		width: 32px;
		height: 32px;"></div>
	<div style="position: absolute; left: 0px; top: 0px; white-space: pre-line; font-family: Consolas; font-size: 18px">
		@br
	</div>
</root>

@code
{
	GameController GameCtrl;

	protected override void OnAwake()
	{
		base.OnStart();
		GameCtrl = GameObject.Components.Get<GameController>();
	}

	long GetMoney() => GameCtrl.Money;

	long GetScore() => GameCtrl.Score;

	Vector2 mouse_position()
	{
		return Mouse.Position;
	}

	/// <summary>
	/// the hash determines if the system should be rebuilt. If it changes, it will be rebuilt
	/// </summary>
	protected override int BuildHash() => System.HashCode.Combine(mouse_position(), GetMoney(), GetScore());
}
